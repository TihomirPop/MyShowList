import"../chunks/DsnmJJEf.js";import{d as Re,a as ze,s as U,b as ue,o as Fe,f as u,e as t,g as r,i as c,j as e,k as w,m as n,n as qe,q as He,$ as Je,x as pe,v as a,y as p,z as he,A as j,B as Ke,C as We,w as _e}from"../chunks/DDMLW2bY.js";import{i as S,a as ge,b as Xe}from"../chunks/DJ-Tgj2u.js";import{b as Ze,e as es,f as ss,s as ye,g as as}from"../chunks/Dyv9doHM.js";import{h as ts,r as rs,s as G}from"../chunks/Dq8RMBer.js";import{b as os}from"../chunks/YTz_6Mw-.js";import{i as ls,g as me,a as is,b as ds}from"../chunks/BwEJmP8-.js";var vs=u('<span class="show-count svelte-ydfd0f"> </span>'),ns=u('<div class="loading-container"><div class="loading-spinner"></div> <p>Loading your shows...</p></div>'),cs=u('<div class="error-banner"> </div> <div style="text-align: center; margin-top: 1rem;"><button class="btn-primary">Try Again</button></div>',1),fs=u('<p class="svelte-ydfd0f"> </p> <p class="hint svelte-ydfd0f">Try a different search term.</p>',1),us=u('<div class="empty-icon svelte-ydfd0f">üì∫</div> <p class="svelte-ydfd0f">Your list is empty!</p> <p class="hint svelte-ydfd0f">Start adding shows to track your watching progress.</p> <a href="/" class="browse-button svelte-ydfd0f">Browse Shows</a>',1),ps=u('<div class="empty-state svelte-ydfd0f"><!></div>'),hs=u('<img class="thumbnail-image svelte-ydfd0f"/>'),_s=u('<div class="thumbnail-placeholder svelte-ydfd0f"></div>'),gs=u('<div class="user-score svelte-ydfd0f"><span class="score-icon svelte-ydfd0f">üë§</span> <span class="score-value svelte-ydfd0f"> </span></div>'),ys=u('<div class="show-genres svelte-ydfd0f"> </div>'),ms=u('<a class="show-card-link svelte-ydfd0f"><article class="user-show-card svelte-ydfd0f"><div class="show-thumbnail svelte-ydfd0f"><!> <span class="show-type-badge svelte-ydfd0f"> </span> <span class="status-badge svelte-ydfd0f"> </span></div> <div class="show-info svelte-ydfd0f"><h3 class="svelte-ydfd0f"> </h3> <div class="scores-row svelte-ydfd0f"><div class="show-score svelte-ydfd0f"><span class="score-icon svelte-ydfd0f">‚≠ê</span> <span class="score-value svelte-ydfd0f"> </span></div> <!></div> <div class="progress-indicator svelte-ydfd0f"> </div> <!></div></article></a>'),ws=u('<div class="shows-grid svelte-ydfd0f"></div>'),bs=u('<div class="container svelte-ydfd0f"><div class="hero svelte-ydfd0f"><h1 class="svelte-ydfd0f">My List</h1> <p class="hero-text svelte-ydfd0f">Track your watching progress and manage your shows</p></div> <section class="shows-section svelte-ydfd0f"><h2 class="svelte-ydfd0f">Your Shows <!></h2> <div class="controls-section svelte-ydfd0f"><div class="control-group search-group svelte-ydfd0f"><label for="search-input" class="svelte-ydfd0f">Search:</label> <input type="search" id="search-input" placeholder="Search shows..." aria-label="Search shows" class="svelte-ydfd0f"/></div> <div class="control-group svelte-ydfd0f"><label for="sort-field" class="svelte-ydfd0f">Sort by:</label> <select id="sort-field" aria-label="Sort shows by" class="svelte-ydfd0f"><option>Your Score</option><option>Average Score</option><option>Release Date</option></select></div> <button type="button" class="sort-direction-btn svelte-ydfd0f" aria-label="Toggle sort direction"> <span class="direction-label svelte-ydfd0f"> </span></button></div> <!></section></div>');function Us(we,be){ze(be,!0);let N=U(ue([])),k=U(!0),D=U(null),Q=U(ue(new Map)),R=U("score"),E=U("desc"),T=U("");function xe(s){const i=new Map(e(Q));i.set(s,!0),c(Q,i,!0)}function Se(s,i){if(!i.trim())return s;const y=i.toLowerCase();return s.filter(b=>{const f=b.show;return!!(f.title.toLowerCase().includes(y)||f.description.toLowerCase().includes(y)||f.genres.some(d=>d.toLowerCase().includes(y)))})}function ke(s,i,y){const b=[...s];return b.sort((f,d)=>{let h;if(i==="averageScore"){if(f.show.averageScore===null&&d.show.averageScore===null)return 0;if(f.show.averageScore===null)return 1;if(d.show.averageScore===null)return-1;h=f.show.averageScore-d.show.averageScore}else if(i==="date"){const m=f.show.type==="MOVIE"?f.show.releaseDate:f.show.startDate,L=d.show.type==="MOVIE"?d.show.releaseDate:d.show.startDate;if(m===null&&L===null)return 0;if(m===null)return 1;if(L===null)return-1;const C=new Date(m).getTime(),g=new Date(L).getTime();h=C-g}else h=f.score-d.score;return y==="asc"?h:-h}),b}const De=pe(()=>Se(e(N),e(T))),$=pe(()=>ke(e(De),e(R),e(E)));Fe(async()=>{await le()});async function le(){if(!ge.token){c(D,"Not authenticated"),c(k,!1);return}c(k,!0),c(D,null);try{const s=await Xe(ge.token);ls(s)?c(N,s.shows,!0):"message"in s?c(D,s.message,!0):c(N,[],!0)}catch(s){s instanceof Error?c(D,s.message,!0):c(D,"An unexpected error occurred")}finally{c(k,!1)}}var z=bs();ts("ydfd0f",s=>{He(()=>{Je.title="My List - MyShowList"})});var ie=r(t(z),2),F=t(ie),Le=r(t(F));{var Me=s=>{var i=vs(),y=t(i);a(i),w(b=>p(y,`(${e($).length??""}${b??""})`),[()=>e(T).trim()?" filtered":""]),n(s,i)};S(Le,s=>{e($).length>0&&s(Me)})}a(F);var q=r(F,2),H=t(q),J=r(t(H),2);rs(J),a(H);var K=r(H,2),P=r(t(K),2),W=t(P);W.value=W.__value="score";var X=r(W);X.value=X.__value="averageScore";var de=r(X);de.value=de.__value="date",a(P),a(K);var B=r(K,2);B.__click=()=>c(E,e(E)==="asc"?"desc":"asc",!0);var ve=t(B),ne=r(ve),Ae=t(ne,!0);a(ne),a(B),a(q);var Ue=r(q,2);{var Ee=s=>{var i=ns();n(s,i)},Te=s=>{var i=he(),y=j(i);{var b=d=>{var h=cs(),m=j(h),L=t(m,!0);a(m);var C=r(m,2),g=t(C);g.__click=le,a(C),w(()=>p(L,e(D))),n(d,h)},f=d=>{var h=he(),m=j(h);{var L=g=>{var M=ps(),O=t(M);{var o=_=>{var A=fs(),I=j(A),Y=t(I);a(I),_e(2),w(()=>p(Y,`No shows found matching "${e(T)??""}"`)),n(_,A)},Z=_=>{var A=us();_e(6),n(_,A)};S(O,_=>{e(T).trim()?_(o):_(Z,!1)})}a(M),n(g,M)},C=g=>{var M=ws();es(M,23,()=>e($),O=>O.show.id,(O,o,Z)=>{var _=ms(),A=t(_),I=t(A),Y=t(I);{var Ce=v=>{var l=hs();w(()=>{G(l,"src",e(o).show.thumbnailUrl),G(l,"alt",`${e(o).show.title??""} poster`)}),Ke("error",l,()=>xe(e(o).show.id)),We(l),n(v,l)},Ie=v=>{var l=_s();w(x=>ye(l,`background: ${x??""};`),[()=>as(e(Z))]),n(v,l)};S(Y,v=>{!e(Q).get(e(o).show.id)&&e(o).show.thumbnailUrl?v(Ce):v(Ie,!1)})}var ee=r(Y,2),Be=t(ee,!0);a(ee);var se=r(ee,2),Oe=t(se,!0);a(se),a(I);var ce=r(I,2),ae=t(ce),Ve=t(ae,!0);a(ae);var te=r(ae,2),re=t(te),fe=r(t(re),2),$e=t(fe,!0);a(fe),a(re);var Pe=r(re,2);{var Ye=v=>{var l=gs(),x=r(t(l),2),V=t(x);a(x),a(l),w(()=>p(V,`${e(o).score??""}/10`)),n(v,l)};S(Pe,v=>{e(o).score>0&&v(Ye)})}a(te);var oe=r(te,2),je=t(oe,!0);a(oe);var Ge=r(oe,2);{var Ne=v=>{var l=ys(),x=t(l,!0);a(l),w(V=>p(x,V),[()=>e(o).show.genres.slice(0,3).join(" ‚Ä¢ ")]),n(v,l)};S(Ge,v=>{e(o).show.genres.length>0&&v(Ne)})}a(ce),a(A),a(_),w((v,l,x,V,Qe)=>{G(_,"href",`/shows/${e(o).show.id??""}`),p(Be,e(o).show.type==="MOVIE"?"Movie":"TV"),ye(se,`background-color: ${v??""}; color: ${l??""};`),p(Oe,x),p(Ve,e(o).show.title),p($e,V),p(je,Qe)},[()=>me(e(o).status).bg,()=>me(e(o).status).text,()=>is(e(o).status),()=>ss(e(o).show.averageScore),()=>ds(e(o))]),n(O,_)}),a(M),n(g,M)};S(m,g=>{e($).length===0?g(L):g(C,!1)},!0)}n(d,h)};S(y,d=>{e(D)?d(b):d(f,!1)},!0)}n(s,i)};S(Ue,s=>{e(k)?s(Ee):s(Te,!1)})}a(ie),a(z),w(()=>{J.disabled=e(k),P.disabled=e(k),B.disabled=e(k),G(B,"title",e(E)==="asc"?"Ascending":"Descending"),p(ve,`${e(E)==="asc"?"‚Üë":"‚Üì"} `),p(Ae,e(E)==="asc"?"Ascending":"Descending")}),os(J,()=>e(T),s=>c(T,s)),Ze(P,()=>e(R),s=>c(R,s)),n(we,z),qe()}Re(["click"]);export{Us as component};
