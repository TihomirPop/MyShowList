import"../chunks/DsnmJJEf.js";import{d as Ne,a as Qe,s as A,b as ce,o as Re,f as u,e as t,g as r,i as c,j as e,k as w,m as n,n as ze,q as Fe,$ as qe,x as fe,v as a,y as _,z as ue,A as j,B as He,C as Je,w as pe}from"../chunks/DT7DyGpg.js";import{i as S,a as he,b as Ke}from"../chunks/DCGF0svJ.js";import{b as We,e as Xe,f as Ze,s as _e,g as es}from"../chunks/DVctERAW.js";import{h as ss,r as as,s as G}from"../chunks/B_ysz1NM.js";import{b as ts}from"../chunks/CCDdTn80.js";import{i as rs,g as ge,a as os,b as ls}from"../chunks/BwEJmP8-.js";var is=u('<span class="show-count svelte-ydfd0f"> </span>'),ds=u('<div class="loading-container"><div class="loading-spinner"></div> <p>Loading your shows...</p></div>'),vs=u('<div class="error-banner"> </div> <div style="text-align: center; margin-top: 1rem;"><button class="btn-primary">Try Again</button></div>',1),ns=u('<p class="svelte-ydfd0f"> </p> <p class="hint svelte-ydfd0f">Try a different search term.</p>',1),cs=u('<div class="empty-icon svelte-ydfd0f">üì∫</div> <p class="svelte-ydfd0f">Your list is empty!</p> <p class="hint svelte-ydfd0f">Start adding shows to track your watching progress.</p> <a href="/" class="browse-button svelte-ydfd0f">Browse Shows</a>',1),fs=u('<div class="empty-state svelte-ydfd0f"><!></div>'),us=u('<img class="thumbnail-image svelte-ydfd0f"/>'),ps=u('<div class="thumbnail-placeholder svelte-ydfd0f"></div>'),hs=u('<div class="user-score svelte-ydfd0f"><span class="score-icon svelte-ydfd0f">üë§</span> <span class="score-value svelte-ydfd0f"> </span></div>'),_s=u('<div class="show-genres svelte-ydfd0f"> </div>'),gs=u('<a class="show-card-link svelte-ydfd0f"><article class="user-show-card svelte-ydfd0f"><div class="show-thumbnail svelte-ydfd0f"><!> <span class="show-type-badge svelte-ydfd0f"> </span> <span class="status-badge svelte-ydfd0f"> </span></div> <div class="show-info svelte-ydfd0f"><h3 class="svelte-ydfd0f"> </h3> <div class="scores-row svelte-ydfd0f"><div class="show-score svelte-ydfd0f"><span class="score-icon svelte-ydfd0f">‚≠ê</span> <span class="score-value svelte-ydfd0f"> </span></div> <!></div> <div class="progress-indicator svelte-ydfd0f"> </div> <!></div></article></a>'),ys=u('<div class="shows-grid svelte-ydfd0f"></div>'),ms=u('<div class="container svelte-ydfd0f"><div class="hero svelte-ydfd0f"><h1 class="svelte-ydfd0f">My List</h1> <p class="hero-text svelte-ydfd0f">Track your watching progress and manage your shows</p></div> <section class="shows-section svelte-ydfd0f"><h2 class="svelte-ydfd0f">Your Shows <!></h2> <div class="controls-section svelte-ydfd0f"><div class="control-group search-group svelte-ydfd0f"><label for="search-input" class="svelte-ydfd0f">Search:</label> <input type="search" id="search-input" placeholder="Search shows..." aria-label="Search shows" class="svelte-ydfd0f"/></div> <div class="control-group svelte-ydfd0f"><label for="sort-field" class="svelte-ydfd0f">Sort by:</label> <select id="sort-field" aria-label="Sort shows by" class="svelte-ydfd0f"><option>Your Score</option><option>Average Score</option><option>Release Date</option></select></div> <button type="button" class="sort-direction-btn svelte-ydfd0f" aria-label="Toggle sort direction"> </button></div> <!></section></div>');function Ms(ye,me){Qe(me,!0);let N=A(ce([])),k=A(!0),D=A(null),Q=A(ce(new Map)),R=A("score"),I=A("desc"),E=A("");function we(s){const i=new Map(e(Q));i.set(s,!0),c(Q,i,!0)}function be(s,i){if(!i.trim())return s;const y=i.toLowerCase();return s.filter(b=>{const f=b.show;return!!(f.title.toLowerCase().includes(y)||f.description.toLowerCase().includes(y)||f.genres.some(d=>d.toLowerCase().includes(y)))})}function xe(s,i,y){const b=[...s];return b.sort((f,d)=>{let p;if(i==="averageScore"){if(f.show.averageScore===null&&d.show.averageScore===null)return 0;if(f.show.averageScore===null)return 1;if(d.show.averageScore===null)return-1;p=f.show.averageScore-d.show.averageScore}else if(i==="date"){const m=f.show.type==="MOVIE"?f.show.releaseDate:f.show.startDate,L=d.show.type==="MOVIE"?d.show.releaseDate:d.show.startDate;if(m===null&&L===null)return 0;if(m===null)return 1;if(L===null)return-1;const T=new Date(m).getTime(),g=new Date(L).getTime();p=T-g}else p=f.score-d.score;return y==="asc"?p:-p}),b}const Se=fe(()=>be(e(N),e(E))),P=fe(()=>xe(e(Se),e(R),e(I)));Re(async()=>{await le()});async function le(){if(!he.token){c(D,"Not authenticated"),c(k,!1);return}c(k,!0),c(D,null);try{const s=await Ke(he.token);rs(s)?c(N,s.shows,!0):"message"in s?c(D,s.message,!0):c(N,[],!0)}catch(s){s instanceof Error?c(D,s.message,!0):c(D,"An unexpected error occurred")}finally{c(k,!1)}}var z=ms();ss("ydfd0f",s=>{Fe(()=>{qe.title="My List - MyShowList"})});var ie=r(t(z),2),F=t(ie),ke=r(t(F));{var De=s=>{var i=is(),y=t(i);a(i),w(b=>_(y,`(${e(P).length??""}${b??""})`),[()=>e(E).trim()?" filtered":""]),n(s,i)};S(ke,s=>{e(P).length>0&&s(De)})}a(F);var q=r(F,2),H=t(q),J=r(t(H),2);as(J),a(H);var K=r(H,2),Y=r(t(K),2),W=t(Y);W.value=W.__value="score";var X=r(W);X.value=X.__value="averageScore";var de=r(X);de.value=de.__value="date",a(Y),a(K);var B=r(K,2);B.__click=()=>c(I,e(I)==="asc"?"desc":"asc",!0);var Le=t(B,!0);a(B),a(q);var Me=r(q,2);{var Ue=s=>{var i=ds();n(s,i)},Ae=s=>{var i=ue(),y=j(i);{var b=d=>{var p=vs(),m=j(p),L=t(m,!0);a(m);var T=r(m,2),g=t(T);g.__click=le,a(T),w(()=>_(L,e(D))),n(d,p)},f=d=>{var p=ue(),m=j(p);{var L=g=>{var M=fs(),O=t(M);{var o=h=>{var U=ns(),C=j(U),$=t(C);a(C),pe(2),w(()=>_($,`No shows found matching "${e(E)??""}"`)),n(h,U)},Z=h=>{var U=cs();pe(6),n(h,U)};S(O,h=>{e(E).trim()?h(o):h(Z,!1)})}a(M),n(g,M)},T=g=>{var M=ys();Xe(M,23,()=>e(P),O=>O.show.id,(O,o,Z)=>{var h=gs(),U=t(h),C=t(U),$=t(C);{var Ee=v=>{var l=us();w(()=>{G(l,"src",e(o).show.thumbnailUrl),G(l,"alt",`${e(o).show.title??""} poster`)}),He("error",l,()=>we(e(o).show.id)),Je(l),n(v,l)},Te=v=>{var l=ps();w(x=>_e(l,`background: ${x??""};`),[()=>es(e(Z))]),n(v,l)};S($,v=>{!e(Q).get(e(o).show.id)&&e(o).show.thumbnailUrl?v(Ee):v(Te,!1)})}var ee=r($,2),Ce=t(ee,!0);a(ee);var se=r(ee,2),Ie=t(se,!0);a(se),a(C);var ve=r(C,2),ae=t(ve),Be=t(ae,!0);a(ae);var te=r(ae,2),re=t(te),ne=r(t(re),2),Oe=t(ne,!0);a(ne),a(re);var Ve=r(re,2);{var Pe=v=>{var l=hs(),x=r(t(l),2),V=t(x);a(x),a(l),w(()=>_(V,`${e(o).score??""}/10`)),n(v,l)};S(Ve,v=>{e(o).score>0&&v(Pe)})}a(te);var oe=r(te,2),Ye=t(oe,!0);a(oe);var $e=r(oe,2);{var je=v=>{var l=_s(),x=t(l,!0);a(l),w(V=>_(x,V),[()=>e(o).show.genres.slice(0,3).join(" ‚Ä¢ ")]),n(v,l)};S($e,v=>{e(o).show.genres.length>0&&v(je)})}a(ve),a(U),a(h),w((v,l,x,V,Ge)=>{G(h,"href",`/shows/${e(o).show.id??""}`),_(Ce,e(o).show.type==="MOVIE"?"Movie":"TV"),_e(se,`background-color: ${v??""}; color: ${l??""};`),_(Ie,x),_(Be,e(o).show.title),_(Oe,V),_(Ye,Ge)},[()=>ge(e(o).status).bg,()=>ge(e(o).status).text,()=>os(e(o).status),()=>Ze(e(o).show.averageScore),()=>ls(e(o))]),n(O,h)}),a(M),n(g,M)};S(m,g=>{e(P).length===0?g(L):g(T,!1)},!0)}n(d,p)};S(y,d=>{e(D)?d(b):d(f,!1)},!0)}n(s,i)};S(Me,s=>{e(k)?s(Ue):s(Ae,!1)})}a(ie),a(z),w(()=>{J.disabled=e(k),Y.disabled=e(k),B.disabled=e(k),G(B,"title",e(I)==="asc"?"Ascending":"Descending"),_(Le,e(I)==="asc"?"‚≠°":"‚≠£")}),ts(J,()=>e(E),s=>c(E,s)),We(Y,()=>e(R),s=>c(R,s)),n(ye,z),ze()}Ne(["click"]);export{Ms as component};
