import{a as E,i as k}from"../chunks/DJ-Tgj2u.js";import{r as T}from"../chunks/C3zk5da-.js";import"../chunks/DsnmJJEf.js";import{a as C,s as m,b as G,f as _,k as f,B as H,j as r,m as x,n as I,q as J,g as i,e as t,i as n,$ as K,v as o,w as N,y as g,W as Q}from"../chunks/DDMLW2bY.js";import{h as V,r as j,s as b}from"../chunks/Dq8RMBer.js";import{b as P}from"../chunks/YTz_6Mw-.js";const X=()=>{if(E.isAuthenticated)throw T(302,"/");return{}},le=Object.freeze(Object.defineProperty({__proto__:null,load:X},Symbol.toStringTag,{value:"Module"}));var Y=_('<div class="error-banner" role="alert"> </div>'),Z=_('<span id="username-error" class="error-message svelte-1x05zx6" role="alert"> </span>'),ee=_('<span id="password-error" class="error-message svelte-1x05zx6" role="alert"> </span>'),re=_(`<div class="login-container svelte-1x05zx6"><div class="login-card svelte-1x05zx6"><h1 class="svelte-1x05zx6">Welcome to MyShowList</h1> <p class="subtitle svelte-1x05zx6">Sign in to track your favorite shows</p> <form class="svelte-1x05zx6"><!> <div class="form-group svelte-1x05zx6"><label for="username" class="svelte-1x05zx6">Username</label> <input id="username" type="text" placeholder="Enter your username"/> <!></div> <div class="form-group svelte-1x05zx6"><label for="password" class="svelte-1x05zx6">Password</label> <input id="password" type="password" placeholder="Enter your password"/> <!></div> <button type="submit" class="btn-primary svelte-1x05zx6"> </button></form> <p class="register-link svelte-1x05zx6">Don't have an account? <a href="/register" class="svelte-1x05zx6">Register here</a></p></div></div>`);function de(M,O){C(O,!0);let u=m(""),c=m(""),l=m(!1),s=m(G({}));function A(){const e={};return(!r(u)||r(u).trim().length<3)&&(e.username="Username must be at least 3 characters"),(!r(c)||r(c).length<6)&&(e.password="Password must be at least 6 characters"),n(s,e,!0),Object.keys(e).length===0}async function D(e){if(e.preventDefault(),n(s,{},!0),!!A()){n(l,!0);try{const a=await E.login(r(u).trim(),r(c));a.success?Q("/"):n(s,{general:a.error||"Login failed"},!0)}catch{n(s,{general:"An unexpected error occurred. Please try again."},!0)}finally{n(l,!1)}}}var h=re();V("1x05zx6",e=>{J(()=>{K.title="Login - MyShowList"})});var L=t(h),w=i(t(L),4),$=t(w);{var U=e=>{var a=Y(),p=t(a,!0);o(a),f(()=>g(p,r(s).general)),x(e,a)};k($,e=>{r(s).general&&e(U)})}var y=i($,2),d=i(t(y),2);j(d);var W=i(d,2);{var q=e=>{var a=Z(),p=t(a,!0);o(a),f(()=>g(p,r(s).username)),x(e,a)};k(W,e=>{r(s).username&&e(q)})}o(y);var z=i(y,2),v=i(t(z),2);j(v);var B=i(v,2);{var F=e=>{var a=ee(),p=t(a,!0);o(a),f(()=>g(p,r(s).password)),x(e,a)};k(B,e=>{r(s).password&&e(F)})}o(z);var S=i(z,2),R=t(S,!0);o(S),o(w),N(2),o(L),o(h),f(()=>{d.disabled=r(l),b(d,"aria-invalid",!!r(s).username),b(d,"aria-describedby",r(s).username?"username-error":void 0),v.disabled=r(l),b(v,"aria-invalid",!!r(s).password),b(v,"aria-describedby",r(s).password?"password-error":void 0),S.disabled=r(l),g(R,r(l)?"Signing in...":"Sign in")}),H("submit",w,D),P(d,()=>r(u),e=>n(u,e)),P(v,()=>r(c),e=>n(c,e)),x(M,h),I()}export{de as component,le as universal};
